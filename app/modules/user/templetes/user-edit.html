<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box">
                <div class="widget-title"> <span class="icon"> <i class="icon-list-alt"></i> </span>
                    <h5>用户信息</h5>
                </div>

                <div class="widget-content text-center">
                    <div class="face_wrapper" data-kz-faceuploader data-tip="上传头像" data-save="upload(data)">
                        <img style="width: 130px; height: 130px;" class="img-polaroid" data-ng-src="{{ user.photo }}" alt="用户头像" />
                    </div>
                </div>

                <div class="widget-content nopadding">
                    <form name="userForm" novalidate class="form-horizontal" data-ng-submit="save()">
                        <div class="control-group">
                            <label class="control-label">帐 号</label>
                            <div class="controls">
                                <input name="useraccount" type="text" data-ng-model="user.account" class="span10" placeholder="登录用的帐号" disabled />
                            </div>
                        </div>
                        <div class="control-group" data-ng-class="{error: !user.name || userForm.username.$dirty && userForm.username.$invalid}">
                            <label class="control-label">姓 名</label>
                            <div class="controls">
                                <input type="text" name="username" data-ng-model="user.name" class="span10" placeholder="真实用户名称" required />
                                <div data-ng-show="!user.name || userForm.username.$dirty && userForm.username.$invalid">
                                    <span data-ng-show="userForm.username.$error.required" class="help-inline"><i class="icon-warning-sign"></i> 姓名是必填项哟~</span>
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">有效性</label>
                            <div class="controls">
                                <kz-switch
                                        data-id="0"
                                        data-method="changeValidity(id, status)"
                                        data-model="user.validity"
                                        data-on-label="是"
                                        data-off-label="否"
                                        data-active="!isLoading" />
                            </div>
                        </div>

                        <div class="control-group" data-ng-class="{error: userForm.userIdCard.$dirty && userForm.userIdCard.$invalid}">
                            <label class="control-label">身份证</label>
                            <div class="controls">
                                <input name="userIdCard" type="text" data-ng-model="user.idCard" class="span10" placeholder="现在身份证的号码有15位和18位" data-ng-pattern="/^\d{15}$|^\d{18}$/"  />
                                <div data-ng-show="userForm.userIdCard.$dirty && userForm.userIdCard.$invalid">
                                    <span data-ng-show="userForm.userIdCard.$error.pattern" class="help-inline"><i class="icon-warning-sign"></i> 身份证号码格式要标准哟， 15位或18位</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">性别</label>
                            <div class="controls">
                                <div class="btn-group" data-ng-model="user.sex" bs-buttons-radio>
                                    <button class="btn" type="button" value="1">俊朗</button>
                                    <button class="btn" type="button" value="-1">中性</button>
                                    <button class="btn" type="button" value="0">靓丽</button>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">账户类型</label>
                            <div class="controls">
                                <div class="btn-group" data-ng-model="user.type" bs-buttons-radio>
                                    <button class="btn btn-primary" type="button" value="1">管理账户</button>
                                    <button class="btn btn-primary" type="button" value="0">会员账户</button>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" data-ng-class="{error: userForm.useremail.$dirty && userForm.useremail.$invalid}">
                            <label class="control-label">邮箱</label>
                            <div class="controls">
                                <input name="useremail" type="email" data-ng-model="user.email" class="span4" placeholder="Email" />
                                <div data-ng-show="userForm.useremail.$dirty && userForm.useremail.$invalid">
                                    <span data-ng-show="userForm.useremail.$error.email" class="help-inline"><i class="icon-warning-sign"></i> 要输入有效的email哟~</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" data-ng-class="{error: userForm.userqq.$dirty && userForm.userqq.$invalid}">
                            <label class="control-label">QQ</label>
                            <div class="controls">
                                <input name="userqq" type="text" data-ng-model="user.qq" class="span4" placeholder="QQ号码" data-ng-pattern="/^[1-9][0-9]{4,}$/" />
                                <div data-ng-show="userForm.userqq.$dirty && userForm.userqq.$invalid">
                                    <span data-ng-show="userForm.userqq.$error.pattern" class="help-inline"><i class="icon-warning-sign"></i> QQ号都是数字哟~</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" data-ng-class="{error: userForm.userphone.$dirty && userForm.userphone.$invalid}">
                            <label class="control-label">电话</label>
                            <div class="controls">
                                <input name="userphone" type="text" data-ng-model="user.phone" class="span10" placeholder="固定电话" data-ng-pattern="/^\d{3}-\d{8}$|^\d{4}-\d{7}$/" />
                                <div data-ng-show="userForm.userphone.$dirty && userForm.userphone.$invalid">
                                    <span data-ng-show="userForm.userphone.$error.pattern" class="help-inline"><i class="icon-warning-sign"></i> 要符合国内固话格式哟，例如：010-1234567</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group" data-ng-class="{error: userForm.usermobile.$dirty && userForm.usermobile.$invalid}">
                            <label class="control-label">手机</label>
                            <div class="controls">
                                <input name="usermobile" type="text" data-ng-model="user.mobile" class="span10" placeholder="移动电话" data-ng-pattern="/^[1][358]\d{9}$/" />
                                <div data-ng-show="userForm.usermobile.$dirty && userForm.usermobile.$invalid">
                                    <span data-ng-show="userForm.usermobile.$error.pattern" class="help-inline"><i class="icon-warning-sign"></i> 请填写合法的手机号码哟~</span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">备注</label>
                            <div class="controls">
                                <textarea name="userinfo" data-ng-model="user.info" class="span10" placeholder="个性签名"></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success" data-ng-disabled="isUnchanged() || userForm.$invalid || isLoading"><i class="icon-ok" data-toggle="tooltip" data-placement="top" title="" data-trigger="hover" data-original-title="保存"></i> <span class="text">保存</span></button>
                            <button type="button" class="btn btn-warning" data-ng-click="reset()" data-ng-disabled="isUnchanged() || isLoading"><i class="icon-repeat" data-toggle="tooltip" data-placement="top" title="" data-trigger="hover" data-original-title="重置"></i> <span class="text">重置</span></button>
                            <kz-action class="btn btn-primary" data-name="userPsw" data-group="user" data-ng-click="$parent.modalWin()" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="form.html">
    <div style="padding-top:5px">
        <form class="form-horizontal" name="pswForm">
            <div class="control-group" data-ng-class="{error: pswForm.password.$dirty && pswForm.password.$invalid}">
                <label class="control-label">设定新密码</label>
                <div class="controls">
                    <data-kz-password-strength password="password">
                        <input name="password"
                               type="password"
                               data-ng-model="$parent.password"
                               class="span3"
                               placeholder="请输入新密码"
                               required
                               data-ng-minlength="6" />
                    </data-kz-password-strength>

                    <div data-ng-show="pswForm.password.$dirty && pswForm.password.$invalid">
                        <span data-ng-show="pswForm.password.$error.required" class="help-inline"><i class="icon-warning-sign"></i> 密码不能为空哟~</span>
                        <span data-ng-show="pswForm.password.$error.minlength" class="help-inline"><i class="icon-warning-sign"></i> 密码不能少于六位哟~</span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="controls">
                    <button type="button" class="btn btn-success" data-ng-disabled="pswForm.$invalid" data-ng-click="updatePsw();hide()"><i class="icon-save"></i> <span class="text">保存</span></button>
                    <span>&nbsp;</span>
                    <button type="button" class="btn" data-ng-click="hide();resetPsw()"><i class="icon-remove"></i> <span class="text">放弃</span></button>
                </div>
            </div>
        </form>
    </div>
</script>
